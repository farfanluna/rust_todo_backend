# API de To-Do en Rust ğŸ¦€

Una API RESTful completa para gestiÃ³n de tareas desarrollada en Rust con Axum, SQLx y autenticaciÃ³n JWT.

## âœ¨ CaracterÃ­sticas

- **ğŸ” AutenticaciÃ³n JWT** - Sistema completo de registro, login y autenticaciÃ³n
- **ğŸ“ CRUD de Tareas** - Crear, leer, actualizar y eliminar tareas
- **ğŸ” BÃºsqueda Avanzada** - Filtros por estado, prioridad, tags, fechas y bÃºsqueda de texto
- **ğŸ“„ PaginaciÃ³n** - NavegaciÃ³n eficiente con metadatos de paginaciÃ³n
- **ğŸ“š DocumentaciÃ³n Swagger** - API totalmente documentada con OpenAPI
- **ğŸ›¡ï¸ Seguridad** - ValidaciÃ³n de entrada, hashing de contraseÃ±as con bcrypt
- **âš¡ Rendimiento** - Base de datos SQLite con Ã­ndices optimizados
- **ğŸ§ª Pruebas** - Suite de pruebas de integraciÃ³n incluidas
- **ğŸ³ Dockerizado** - Listo para producciÃ³n con `docker-compose`

## ğŸš€ Inicio RÃ¡pido (Recomendado con Docker)

### Prerrequisitos

- Docker y Docker Compose

### EjecuciÃ³n

1. **Clonar el repositorio**
   ```bash
   git clone <repo-url>
   cd rust_todo_backend
   ```

2. **Configurar variables de entorno**
   Copia el archivo de ejemplo y ajÃºstalo si es necesario.
   ```bash
   cp .env.example .env
   ```

3. **Levantar los servicios**
   Este comando construirÃ¡ la imagen de Rust y levantarÃ¡ el servidor.
   ```bash
   docker-compose up --build
   ```

El servidor estarÃ¡ disponible en:
- **Frontend**: `http://127.0.0.1`
- **API**: `http://127.0.0.1/api`
- **Swagger UI**: `http://127.0.0.1/swagger-ui`

Para detener los servicios, presiona `Ctrl+C` y luego ejecuta:
```bash
docker-compose down
```

---

## ğŸ› ï¸ InstalaciÃ³n Manual

### Prerrequisitos

- Rust 1.70+ (instalar desde [rustup.rs](https://rustup.rs/))
- SQLite (incluido en la mayorÃ­a de sistemas)
- `sqlx-cli` para las migraciones

### InstalaciÃ³n

1. **Clonar el repositorio**
   ```bash
   git clone <repo-url>
   cd rust_todo_backend
   ```

2. **Configurar variables de entorno**
   ```bash
   cp .env.example .env
   # Editar .env con tu configuraciÃ³n
   ```

3. **Instalar dependencias y compilar**
   ```bash
   cargo build
   ```

4. **Ejecutar migraciones**
   ```bash
   cargo install sqlx-cli --no-default-features --features sqlite
   sqlx migrate run
   ```

5. **Iniciar el servidor**
   ```bash
   cargo run
   ```

El servidor estarÃ¡ disponible en:
- **API**: `http://127.0.0.1:3000`
- **Swagger UI**: `http://127.0.0.1:3000/swagger-ui`

## ğŸ”§ ConfiguraciÃ³n

### Variables de Entorno (.env)

```bash
# Base de datos
DATABASE_URL=sqlite:todo.db

# JWT
JWT_SECRET=tu_clave_secreta_jwt_de_al_menos_32_caracteres
JWT_EXPIRATION_HOURS=24

# Servidor
PORT=3000
HOST=127.0.0.1

# Logging
RUST_LOG=debug
```

### Usuario de DemostraciÃ³n

La migraciÃ³n incluye un usuario demo:
- **Email**: `demo@todoapi.com`
- **ContraseÃ±a**: `demo123`

## ğŸ“– Uso de la API

### AutenticaciÃ³n

#### Registrar Usuario
```bash
curl -X POST http://localhost:3000/auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Juan PÃ©rez",
    "email": "juan@example.com",
    "password": "mi_password_seguro"
  }'
```

#### Iniciar SesiÃ³n
```bash
curl -X POST http://localhost:3000/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "email": "juan@example.com",
    "password": "mi_password_seguro"
  }'
```

Respuesta:
```json
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "user": {
    "id": 1,
    "name": "Juan PÃ©rez",
    "email": "juan@example.com",
    "created_at": "2025-08-18T10:00:00Z"
  }
}
```

#### Obtener Usuario Actual
```bash
curl -X GET http://localhost:3000/me \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"
```

### GestiÃ³n de Tareas

#### Crear Tarea
```bash
curl -X POST http://localhost:3000/tasks \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "title": "Implementar nueva funcionalidad",
    "description": "Desarrollar el mÃ³dulo de reportes",
    "status": "todo",
    "priority": "high",
    "due_date": "2025-08-25T17:00:00Z",
    "tags": "desarrollo,backend,rust"
  }'
```

#### Obtener Tareas con Filtros
```bash
# Tareas bÃ¡sicas
curl -X GET "http://localhost:3000/tasks" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"

# Con filtros avanzados
curl -X GET "http://localhost:3000/tasks?status=todo,doing&priority=high&search=API&sort_by=due_date&sort_order=asc&page=1&per_page=5" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"
```

#### Actualizar Tarea
```bash
curl -X PUT http://localhost:3000/tasks/1 \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "status": "doing",
    "priority": "med"
  }'
```

#### Eliminar Tarea
```bash
curl -X DELETE http://localhost:3000/tasks/1 \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"
```

## ğŸ” Filtros y BÃºsqueda

La API soporta filtros avanzados en `GET /tasks`:

| ParÃ¡metro | DescripciÃ³n | Ejemplo |
|-----------|-------------|---------|
| `status` | Estados (separados por coma) | `todo,doing,done` |
| `priority` | Prioridades (separadas por coma) | `high,med,low` |
| `tags` | BÃºsqueda en tags | `rust,api` |
| `search` | BÃºsqueda en tÃ­tulo/descripciÃ³n | `documentaciÃ³n` |
| `sort_by` | Campo de ordenaciÃ³n | `created_at,due_date,title,priority,status` |
| `sort_order` | Orden | `asc,desc` |
| `page` | PÃ¡gina (empezando en 1) | `1` |
| `per_page` | Elementos por pÃ¡gina (mÃ¡x 100) | `10` |
| `due_date_start` | Fecha inicio | `2025-08-01T00:00:00Z` |
| `due_date_end` | Fecha fin | `2025-12-31T23:59:59Z` |

## ğŸ—ï¸ Arquitectura

```
rust_todo_backend/
â”œâ”€â”€ Cargo.toml                 âœ… Dependencias completas
â”œâ”€â”€ .env.example              âœ… Variables de entorno template
â”œâ”€â”€ .gitignore                âœ… Archivos a ignorar
â”œâ”€â”€ README.md                 âœ… DocumentaciÃ³n completa
â”œâ”€â”€ docker-compose.yml        âœ… Para deployment
â”œâ”€â”€ migrations/
â”‚   â””â”€â”€ 0001_init.sql         âœ… Schema con datos demo
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ setup.sh              âœ… Setup automÃ¡tico
â”‚   â”œâ”€â”€ test.sh               âœ… Ejecutar pruebas
â”‚   â””â”€â”€ dev.sh                âœ… Modo desarrollo
â””â”€â”€ src/
    â”œâ”€â”€ Dockerfile            âœ… Para containerizaciÃ³n (NUEVO)
    â”œâ”€â”€ main.rs               âœ… Punto de entrada
    â”œâ”€â”€ config.rs             âœ… ConfiguraciÃ³n
    â”œâ”€â”€ error.rs              âœ… Manejo de errores
    â”œâ”€â”€ db.rs                 âœ… Base de datos
    â”œâ”€â”€ models.rs             âœ… Modelos completos
    â”œâ”€â”€ routes.rs             âœ… Todos los endpoints
    â”œâ”€â”€ auth/
    â”‚   â”œâ”€â”€ mod.rs            âœ… MÃ³dulo auth
    â”‚   â”œâ”€â”€ jwt.rs            âœ… GestiÃ³n JWT
    â”‚   â””â”€â”€ middleware.rs     âœ… Middleware auth
    â””â”€â”€ tests/
        â”œâ”€â”€ mod.rs            âœ… MÃ³dulo pruebas
        â””â”€â”€ integration.rs    âœ… Pruebas integraciÃ³n
```

## ğŸ§ª Pruebas

```bash
# Ejecutar todas las pruebas
cargo test

# Ejecutar pruebas con logs
cargo test -- --nocapture

# Ejecutar pruebas especÃ­ficas
cargo test integration_tests
```

## ğŸ› ï¸ Desarrollo

### Comandos Ãštiles

```bash
# Verificar cÃ³digo
cargo check

# Formatear cÃ³digo
cargo fmt

# Linter
cargo clippy

# DocumentaciÃ³n
cargo doc --open

# Migraciones
sqlx migrate add <nombre_migracion>
sqlx migrate run
sqlx migrate revert
```

### Estructura de Base de Datos

#### Tabla `users`
- `id`: PRIMARY KEY
- `name`: Nombre del usuario
- `email`: Email Ãºnico
- `password_hash`: Hash bcrypt de la contraseÃ±a
- `created_at`: Timestamp de creaciÃ³n

#### Tabla `tasks`
- `id`: PRIMARY KEY
- `user_id`: FK a users
- `title`: TÃ­tulo de la tarea
- `description`: DescripciÃ³n opcional
- `status`: `todo`, `doing`, `done`
- `priority`: `low`, `med`, `high`
- `due_date`: Fecha lÃ­mite (ISO 8601)
- `created_at`, `updated_at`: Timestamps
- `tags`: String separado por comas

## ğŸ“š DocumentaciÃ³n API

Una vez ejecutando el servidor, visita:
- **Swagger UI**: `http://localhost:3000/swagger-ui`
- **OpenAPI JSON**: `http://localhost:3000/api-docs/openapi.json`

## ğŸ–¥ï¸ AplicaciÃ³n de Escritorio (Tauri)

Este proyecto tambiÃ©n se puede compilar como una aplicaciÃ³n de escritorio para Windows, macOS y Linux.

### Prerrequisitos

- Seguir los [prerrequisitos de Tauri](https://tauri.app/v1/guides/getting-started/prerequisites) para tu sistema operativo.

### EjecuciÃ³n en Modo Desarrollo

```bash
# Navega a la carpeta del frontend
cd frontend

# Inicia la aplicaciÃ³n de escritorio
npm run tauri dev
```

### CompilaciÃ³n para ProducciÃ³n

```bash
# Navega a la carpeta del frontend
cd frontend/frontend

# Compila la aplicaciÃ³n
npm run tauri build
```

Los ejecutables se encontrarÃ¡n en `frontend/frontend/src-tauri/target/release/`.

## ğŸ¤ ContribuciÃ³n

1. Fork el proyecto
2. Crea una rama para tu funcionalidad (`git checkout -b feature/AmazingFeature`)
3. Commit tus cambios (`git commit -m 'Add some AmazingFeature'`)
4. Push a la rama (`git push origin feature/AmazingFeature`)
5. Abre un Pull Request

## ğŸ“„ Licencia

Este proyecto estÃ¡ bajo la Licencia MIT. Ver `LICENSE` para mÃ¡s detalles.

## ğŸ†˜ Soporte

Si tienes problemas o preguntas:

1. Revisa la [documentaciÃ³n de Swagger UI](http://localhost:3000/swagger-ui)
2. Consulta los logs con `RUST_LOG=debug cargo run`
3. Verifica que todas las variables de entorno estÃ©n configuradas
4. AsegÃºrate de que las migraciones se hayan ejecutado correctamente

---

### Generar Ejecutable

Para generar el ejecutable de la aplicaciÃ³n de escritorio, sigue estos pasos:

1. **Limpiar compilaciones anteriores y generar el ejecutable**
   ```bash
   rd /s /q frontend/src-tauri/target && cd frontend && npm run tauri build
   ```

2. **Ejecutar la aplicaciÃ³n**
   Una vez compilado, el ejecutable se encontrarÃ¡ en la siguiente ruta:
   ```bash
   \rust_todo_backend\frontend\src-tauri\target\release
   ```
   Puedes ejecutar el archivo `rust-todo-desktop.exe` desde esa carpeta.

   *Nota: La compilaciÃ³n requiere que `cargo` estÃ© disponible en el PATH del sistema.*

Desarrollado con Rust
